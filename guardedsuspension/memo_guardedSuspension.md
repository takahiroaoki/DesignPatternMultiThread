# Guarded Suspensionパターン

共有資源の準備ができるまで、待たせるパターン。
wait()とnotify()/notifyAll()メソッドの組み合わせで実装する。
wait()はその共有資源に関してロックを掛けているスレッドのみが実行でき、その共有資源のウェイトセットに入る。その際ロックを解除する。他スレッドが共有資源に関して準備をし、準備が終わった段階でnotify()/notifyAll()メソッドを呼び出すことでウェイトセットにあるスレッドを呼び覚ますことができる。

今回はRequestQueueクラスにwait()やnotify()を実装したが、代わりにjava.util.concurrent.LinkedBlockingQueueクラスを用いることで、自分ではwait()やnotify()を書かずに同様の処理を実現できる。
こうした処理は共有資源のクラスの中に限定させることで、それを利用する各スレッドには制御を意識させないことも、保守の観点から重要。