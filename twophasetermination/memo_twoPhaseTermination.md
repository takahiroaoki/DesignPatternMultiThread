# Two Phase Terminationパターン

終了要求を受けてから（第1段階）、必要な処理をして安全に終了する（第2段階）パターン。

isShutdownRequestedフラグを調べるだけでなく、interrupt()メソッドを呼び出す必要があるのは、その際にスレッドがsleepしていたりwaitしている可能性があるためである。いずれ処理を開始する設計にちゃんとなっていれば、プログラム自体はちゃんと動くが、終了要求に対する応答性が悪くなる。同様に、終了要求を受けているかどうかを調べるのは、重い処理の前にやることが、応答性をあげるために重要になってくる。

なお、Threadクラスにはstopメソッドがあるが、こちらは現在非推奨になっている。スレッドを強制的に終了させるため安全性が保証されないからである。